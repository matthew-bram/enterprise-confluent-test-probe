---
allowed-tools: Bash(git log:*), Bash(git diff:*), Bash(git status:*), Read, Edit
description: Analyze git changes and generate Claude-optimized changelog entries
argument-hint: [hours-back] (default: 8)
---

Analyze today's development work using git history and current changes to create comprehensive changelog entries optimized for future Claude instances.

## Process

**Step 1: Gather Git Context & Author Info**
- Run `git config --get user.email || echo "unknown@user"` to get current git user
- Extract first 8 characters of `$TERM_SESSION_ID` for Claude session tracking
- Run `git log --oneline --since="X hours ago"` to see recent commits
- Run `git status --porcelain` to see modified/staged files
- Run `git diff --name-only HEAD~1` to see files changed in recent commits
- If no commits today, analyze working directory changes

**Step 2: Analyze Changes**
For each modified file:
- Read the file to understand the nature of changes
- Identify if changes are: Added features, Bug fixes, Refactoring, Configuration, Documentation
- Look for TODO comments, error handling improvements, or architectural changes
- Extract JIRA ticket references from commit messages or file comments

**Step 3: Generate Claude-Optimized Entries**
Create changelog entries with enhanced context and authorship:

```markdown
- **[Type]** [TICKET-123] Description in `File.scala:approximate-line`
  - Author: user@example.com | Claude:3af31ee9
  - Solution/Approach: Brief explanation of how it was implemented
  - Context: Why this approach was chosen, what alternatives were considered
  - Related: Other files that were touched or are relevant
  - Future: Any follow-up work needed or gotchas to avoid
```

**Step 4: Update Current State Section**
Intelligently update the Current State based on findings:
- **Known Issues**: Remove items that were fixed, add newly discovered issues
- **Active Work**: Update based on WIP files and TODO comments found
- **Tech Debt**: Add items based on code smells, TODOs, or complexity discovered

**Step 5: Smart Classification**
Auto-detect entry types:
- **Added**: New files, new functions/classes, new features
- **Fixed**: Bug fixes, error handling, test fixes
- **Changed**: Refactoring, configuration updates, dependency changes
- **Removed**: Deleted files, removed functionality
- **Security**: Authentication, authorization, credential handling
- **Deprecated**: Marked for future removal

## Advanced Context for Claude

Include implementation details that help future Claude sessions:

**Successful Patterns:**
- What approach worked and why
- Key files that implement the pattern
- Configuration or setup requirements

**Failed Attempts:**
- What was tried but didn't work
- Error messages encountered
- Reasons for abandoning approach

**Architectural Decisions:**
- Why certain libraries/frameworks were chosen
- Trade-offs that were made
- Impact on other system components

## Example Output Format

```markdown
## 2024-01-15
- **Fixed** [PROB-124] TestState JSON serialization in `ModelsSpec.scala:25`
  - Author: developer@company.com | Claude:3af31ee9
  - Solution: Added explicit Format[TestState] implicit in models/package.scala
  - Context: Json.format[TestState] failed because TestState is sealed trait with case objects
  - Related: All other model JSON formatters in same package object
  - Future: Consider moving to auto-derivation library like circe-generic-extras

- **Added** Daily summary command system in `.claude/commands/log-summary.md`
  - Author: developer@company.com | Claude:3af31ee9
  - Approach: Git analysis + file reading for comprehensive change detection
  - Context: Enables automated changelog generation optimized for Claude context
  - Related: `log.md` for manual entries, `CHANGELOG.md` for output
  - Future: Could enhance with commit message parsing for better categorization

## Summary Metadata
- **Generated by**: developer@company.com | Claude:3af31ee9
- **Analysis Period**: Last 8 hours
- **Total Changes**: 5 files modified, 2 commits analyzed
```

## Usage Examples

```bash
/log-summary              # Analyze last 8 hours
/log-summary 24           # Analyze last 24 hours
/log-summary 4            # Analyze last 4 hours
```

This command bridges the gap between technical git history and human-readable development narrative, creating rich context for future development sessions.